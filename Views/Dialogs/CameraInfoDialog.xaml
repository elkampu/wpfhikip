<Window x:Class="wpfhikip.Views.Dialogs.CameraInfoDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:converters="clr-namespace:wpfhikip.Converters"
        mc:Ignorable="d"
        Title="Camera Information"
        Height="650"
        Width="700"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize"
        Background="#FF2D2D30"
        MinHeight="500"
        MinWidth="600">
    <Window.Resources>
        <converters:EnumToStringConverter x:Key="EnumToStringConverter" />
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <converters:InverseBooleanToVisibilityConverter x:Key="InverseBooleanToVisibilityConverter" />

        <Style x:Key="ModernTextBlockStyle"
               TargetType="TextBlock">
            <Setter Property="Foreground"
                    Value="White" />
            <Setter Property="FontFamily"
                    Value="Segoe UI" />
            <Setter Property="FontSize"
                    Value="12" />
        </Style>

        <Style x:Key="HeaderTextBlockStyle"
               TargetType="TextBlock"
               BasedOn="{StaticResource ModernTextBlockStyle}">
            <Setter Property="FontSize"
                    Value="18" />
            <Setter Property="FontWeight"
                    Value="Bold" />
            <Setter Property="Margin"
                    Value="0,0,0,15" />
        </Style>

        <Style x:Key="SectionHeaderStyle"
               TargetType="TextBlock"
               BasedOn="{StaticResource ModernTextBlockStyle}">
            <Setter Property="FontSize"
                    Value="14" />
            <Setter Property="FontWeight"
                    Value="Bold" />
            <Setter Property="Margin"
                    Value="0,0,0,10" />
            <Setter Property="Foreground"
                    Value="#FF4A9EFF" />
        </Style>

        <Style x:Key="LabelTextBlockStyle"
               TargetType="TextBlock"
               BasedOn="{StaticResource ModernTextBlockStyle}">
            <Setter Property="FontWeight"
                    Value="Bold" />
            <Setter Property="FontSize"
                    Value="11" />
            <Setter Property="Margin"
                    Value="0,0,10,5" />
            <Setter Property="VerticalAlignment"
                    Value="Top" />
        </Style>

        <Style x:Key="ValueTextBlockStyle"
               TargetType="TextBlock"
               BasedOn="{StaticResource ModernTextBlockStyle}">
            <Setter Property="FontSize"
                    Value="11" />
            <Setter Property="FontFamily"
                    Value="Consolas" />
            <Setter Property="Margin"
                    Value="0,0,0,5" />
            <Setter Property="TextWrapping"
                    Value="Wrap" />
        </Style>

        <Style x:Key="CloseButtonStyle"
               TargetType="Button">
            <Setter Property="Background"
                    Value="#FF007ACC" />
            <Setter Property="Foreground"
                    Value="White" />
            <Setter Property="BorderThickness"
                    Value="0" />
            <Setter Property="FontWeight"
                    Value="Medium" />
            <Setter Property="FontSize"
                    Value="12" />
            <Setter Property="Cursor"
                    Value="Hand" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="4"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                BorderBrush="{TemplateBinding BorderBrush}">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="{TemplateBinding Padding}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver"
                                     Value="True">
                                <Setter Property="Background"
                                        Value="#FF1F8AD6" />
                            </Trigger>
                            <Trigger Property="IsPressed"
                                     Value="True">
                                <Setter Property="Background"
                                        Value="#FF005A9E" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="RefreshButtonStyle"
               TargetType="Button"
               BasedOn="{StaticResource CloseButtonStyle}">
            <Setter Property="Background"
                    Value="#FF28A745" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver"
                         Value="True">
                    <Setter Property="Background"
                            Value="#FF34CE57" />
                </Trigger>
                <Trigger Property="IsPressed"
                         Value="True">
                    <Setter Property="Background"
                            Value="#FF1E7E34" />
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="AutoRefreshButtonStyle"
               TargetType="Button"
               BasedOn="{StaticResource CloseButtonStyle}">
            <Setter Property="Background"
                    Value="#FF6C757D" />
            <Style.Triggers>
                <DataTrigger Binding="{Binding AutoRefreshEnabled}"
                             Value="True">
                    <Setter Property="Background"
                            Value="#FF17A2B8" />
                </DataTrigger>
                <Trigger Property="IsMouseOver"
                         Value="True">
                    <Setter Property="Background"
                            Value="#FF5A6268" />
                </Trigger>
                <MultiDataTrigger>
                    <MultiDataTrigger.Conditions>
                        <Condition Binding="{Binding RelativeSource={RelativeSource Self}, Path=IsMouseOver}"
                                   Value="True" />
                        <Condition Binding="{Binding AutoRefreshEnabled}"
                                   Value="True" />
                    </MultiDataTrigger.Conditions>
                    <Setter Property="Background"
                            Value="#FF138496" />
                </MultiDataTrigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="SectionBorderStyle"
               TargetType="Border">
            <Setter Property="Background"
                    Value="#FF383838" />
            <Setter Property="CornerRadius"
                    Value="6" />
            <Setter Property="Padding"
                    Value="15" />
            <Setter Property="Margin"
                    Value="0,0,0,15" />
            <Setter Property="BorderThickness"
                    Value="1" />
            <Setter Property="BorderBrush"
                    Value="#FF505050" />
        </Style>

        <Style x:Key="LoadingStyle"
               TargetType="TextBlock"
               BasedOn="{StaticResource ModernTextBlockStyle}">
            <Setter Property="FontSize"
                    Value="14" />
            <Setter Property="FontWeight"
                    Value="Bold" />
            <Setter Property="HorizontalAlignment"
                    Value="Center" />
            <Setter Property="Foreground"
                    Value="#FF4A9EFF" />
        </Style>

        <Style x:Key="ErrorStyle"
               TargetType="TextBlock"
               BasedOn="{StaticResource ModernTextBlockStyle}">
            <Setter Property="FontSize"
                    Value="12" />
            <Setter Property="Foreground"
                    Value="#FFFF6B6B" />
            <Setter Property="TextWrapping"
                    Value="Wrap" />
            <Setter Property="Margin"
                    Value="0,10,0,0" />
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0"
                    Orientation="Horizontal">
            <TextBlock Text="{Binding IpAddress, StringFormat='Camera Information - {0}'}"
                       Style="{StaticResource HeaderTextBlockStyle}"
                       VerticalAlignment="Center" />
            <TextBlock Text="(Auto-refresh: ON)"
                       Style="{StaticResource ModernTextBlockStyle}"
                       FontSize="12"
                       Foreground="#FF17A2B8"
                       Margin="10,0,0,0"
                       VerticalAlignment="Center"
                       Visibility="{Binding AutoRefreshEnabled, Converter={StaticResource BooleanToVisibilityConverter}}" />
        </StackPanel>

        <!-- Loading Status -->
        <Border Grid.Row="1"
                Background="#FF383838"
                CornerRadius="4"
                Padding="10"
                Margin="0,0,0,15"
                Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center">
                <TextBlock Text="●"
                           Foreground="#FF4A9EFF"
                           FontSize="16"
                           Margin="0,0,10,0">
                    <TextBlock.RenderTransform>
                        <RotateTransform x:Name="LoadingRotation" />
                    </TextBlock.RenderTransform>
                    <TextBlock.Triggers>
                        <EventTrigger RoutedEvent="Loaded">
                            <BeginStoryboard>
                                <Storyboard RepeatBehavior="Forever">
                                    <DoubleAnimation Storyboard.TargetName="LoadingRotation"
                                                     Storyboard.TargetProperty="Angle"
                                                     From="0"
                                                     To="360"
                                                     Duration="0:0:1" />
                                </Storyboard>
                            </BeginStoryboard>
                        </EventTrigger>
                    </TextBlock.Triggers>
                </TextBlock>
                <TextBlock Text="{Binding LoadingStatus}"
                           Style="{StaticResource LoadingStyle}" />
            </StackPanel>
        </Border>

        <!-- Error Message -->
        <Border Grid.Row="1"
                Background="#FF8B0000"
                CornerRadius="4"
                Padding="10"
                Margin="0,0,0,15"
                Visibility="{Binding HasError, Converter={StaticResource BooleanToVisibilityConverter}}">
            <TextBlock Text="{Binding ErrorMessage}"
                       Style="{StaticResource ErrorStyle}"
                       Foreground="White" />
        </Border>

        <!-- Content -->
        <ScrollViewer Grid.Row="2"
                      VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Connection Information -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Connection Information"
                                   Style="{StaticResource SectionHeaderStyle}" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0"
                                       Grid.Column="0"
                                       Text="IP Address:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="0"
                                       Grid.Column="1"
                                       Text="{Binding IpAddress}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="1"
                                       Grid.Column="0"
                                       Text="Port:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="1"
                                       Grid.Column="1"
                                       Text="{Binding Port}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="2"
                                       Grid.Column="0"
                                       Text="Protocol:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="2"
                                       Grid.Column="1"
                                       Text="{Binding Protocol}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="3"
                                       Grid.Column="0"
                                       Text="Username:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="3"
                                       Grid.Column="1"
                                       Text="{Binding Username}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="4"
                                       Grid.Column="0"
                                       Text="Status:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="4"
                                       Grid.Column="1"
                                       Text="{Binding Status}"
                                       Style="{StaticResource ValueTextBlockStyle}" />
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Device Information -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Device Information"
                                   Style="{StaticResource SectionHeaderStyle}" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0"
                                       Grid.Column="0"
                                       Text="Manufacturer:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="0"
                                       Grid.Column="1"
                                       Text="{Binding Manufacturer}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="1"
                                       Grid.Column="0"
                                       Text="Model:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="1"
                                       Grid.Column="1"
                                       Text="{Binding Model}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="2"
                                       Grid.Column="0"
                                       Text="Firmware:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="2"
                                       Grid.Column="1"
                                       Text="{Binding Firmware}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="3"
                                       Grid.Column="0"
                                       Text="Serial Number:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="3"
                                       Grid.Column="1"
                                       Text="{Binding SerialNumber}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="4"
                                       Grid.Column="0"
                                       Text="MAC Address:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="4"
                                       Grid.Column="1"
                                       Text="{Binding MacAddress}"
                                       Style="{StaticResource ValueTextBlockStyle}" />
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Network Settings -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Network Settings"
                                   Style="{StaticResource SectionHeaderStyle}" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0"
                                       Grid.Column="0"
                                       Text="Current IP:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="0"
                                       Grid.Column="1"
                                       Text="{Binding CurrentIp}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="1"
                                       Grid.Column="0"
                                       Text="Subnet Mask:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="1"
                                       Grid.Column="1"
                                       Text="{Binding SubnetMask}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="2"
                                       Grid.Column="0"
                                       Text="Gateway:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="2"
                                       Grid.Column="1"
                                       Text="{Binding Gateway}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="3"
                                       Grid.Column="0"
                                       Text="DNS1:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="3"
                                       Grid.Column="1"
                                       Text="{Binding Dns1}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="4"
                                       Grid.Column="0"
                                       Text="DNS2:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="4"
                                       Grid.Column="1"
                                       Text="{Binding Dns2}"
                                       Style="{StaticResource ValueTextBlockStyle}" />
                        </Grid>
                    </StackPanel>
                </Border>

                <!-- Video Stream Information -->
                <Border Style="{StaticResource SectionBorderStyle}">
                    <StackPanel>
                        <TextBlock Text="Video Stream Information"
                                   Style="{StaticResource SectionHeaderStyle}" />
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0"
                                       Grid.Column="0"
                                       Text="Main Stream:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="0"
                                       Grid.Column="1"
                                       Text="{Binding MainStream}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="1"
                                       Grid.Column="0"
                                       Text="Sub Stream:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="1"
                                       Grid.Column="1"
                                       Text="{Binding SubStream}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="2"
                                       Grid.Column="0"
                                       Text="Resolution:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="2"
                                       Grid.Column="1"
                                       Text="{Binding Resolution}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="3"
                                       Grid.Column="0"
                                       Text="Frame Rate:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="3"
                                       Grid.Column="1"
                                       Text="{Binding FrameRate}"
                                       Style="{StaticResource ValueTextBlockStyle}" />

                            <TextBlock Grid.Row="4"
                                       Grid.Column="0"
                                       Text="Bit Rate:"
                                       Style="{StaticResource LabelTextBlockStyle}" />
                            <TextBlock Grid.Row="4"
                                       Grid.Column="1"
                                       Text="{Binding BitRate}"
                                       Style="{StaticResource ValueTextBlockStyle}" />
                        </Grid>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

        <!-- Button Section -->
        <StackPanel Grid.Row="3"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right">
            <!-- Auto Refresh Toggle Button -->
            <Button Width="100"
                    Height="32"
                    Margin="0,0,10,0"
                    Style="{StaticResource AutoRefreshButtonStyle}"
                    Command="{Binding ToggleAutoRefreshCommand}">
                <Button.Content>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="🔄"
                                   FontSize="10"
                                   Margin="0,0,5,0" />
                        <TextBlock>
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Text"
                                            Value="Auto: OFF" />
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding AutoRefreshEnabled}"
                                                     Value="True">
                                            <Setter Property="Text"
                                                    Value="Auto: ON" />
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </Button.Content>
            </Button>

            <!-- Cancel Button - Only visible when loading -->
            <Button Content="Cancel"
                    Width="80"
                    Height="32"
                    Margin="0,0,10,0"
                    Style="{StaticResource RefreshButtonStyle}"
                    Command="{Binding CancelCommand}"
                    Visibility="{Binding IsLoading, Converter={StaticResource BooleanToVisibilityConverter}}" />

            <!-- Refresh Button - Only visible when NOT loading -->
            <Button Content="Refresh"
                    Width="80"
                    Height="32"
                    Margin="0,0,10,0"
                    Style="{StaticResource RefreshButtonStyle}"
                    Command="{Binding RefreshCommand}"
                    Visibility="{Binding IsLoading, Converter={StaticResource InverseBooleanToVisibilityConverter}}" />

            <Button Content="Close"
                    Width="80"
                    Height="32"
                    Style="{StaticResource CloseButtonStyle}"
                    Click="CloseButton_Click" />
        </StackPanel>
    </Grid>
</Window>